 WITH BROJ_POLOZENIH AS (
 	SELECT INDEKS
 	FROM DA.ISPIT
 	WHERE OCENA > 5 AND STATUS = 'o'
 	GROUP BY INDEKS
 	HAVING COUNT(*) = ?
 ) 
 SELECT D.INDEKS, IME, PREZIME, SP.NAZIV, P.NAZIV, OCENA
 FROM DA.DOSIJE D JOIN DA.STUDIJSKIPROGRAM SP
 		ON D.IDPROGRAMA = SP.ID
 	JOIN DA.ISPIT I	
 		ON D.INDEKS = I.INDEKS
 	JOIN DA.PREDMET P 
 		ON I.IDPREDMETA = P.ID
 	JOIN BROJ_POLOZENIH BP
 		ON BP.INDEKS = D.INDEKS
 WHERE OCENA > 5 AND STATUS = 'o'
 ORDER BY D.INDEKS;